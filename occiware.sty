\NeedsTeXFormat{LaTeX2e}

\RequirePackage[utf8]{inputenc}
\RequirePackage{graphicx}
\RequirePackage{tabularx}
\RequirePackage{etoolbox}
\RequirePackage[french,english]{babel}
 
\ProvidesPackage{occiware}[2015/01/05 OCCIware reports specific commands, V1.0]

%
% Macros
%
\def\@owdelivnr{<deliv. nr to set>}
\newcommand{\owdelivnr}[1]{\def\@owdelivnr{#1}}

\def\@owexpected{<exp. date to set>}
\newcommand{\owexpected}[1]{\def\@owexpected{#1}}

\def\@owdelivered{\today}
\newcommand{\owdelivered}[1]{\def\@owdelivered{#1}}

\def\@owstatus{draft}
\newcommand{\owstatus}[1]{\def\@owstatus{#1}}

\def\@ownature{public}
\newcommand{\ownature}[1]{\def\@ownature{#1}}

\def\@owversion{<deliv. version to set>}
\newcommand{\owversion}[1]{\def\@owversion{#1}}

%
% Translations
%
\newcommand{\owmldoc}{
  \iflanguage{english}{Document}
  {\iflanguage{french}{Document}{}
  }}
\newcommand{\owmlexpected}{
  \iflanguage{english}{Expected}
  {\iflanguage{french}{Prévu}{}
  }}
\newcommand{\owmldelivered}{
  \iflanguage{english}{Delivered}
  {\iflanguage{french}{Livré}{}
  }}
\newcommand{\owmlstatus}{
  \iflanguage{english}{Status}
  {\iflanguage{french}{Statut}{}
  }}
\newcommand{\owmlnature}{
  \iflanguage{english}{Nature}
  {\iflanguage{french}{Nature}{}
  }}
\newcommand{\owmlversion}{
  \iflanguage{english}{Version}
  {\iflanguage{french}{Version}{}
  }}
\newcommand{\owmltitle}{
  \iflanguage{english}{Title}
  {\iflanguage{french}{Titre}{}
  }}
\newcommand{\owmlauthor}{
 \iflanguage{english}{Author(s)}
 {\iflanguage{french}{Auteur(s)}{}
 }}


%
% Page, headers settings
%

\RequirePackage{fullpage}
\RequirePackage{fancyhdr}

\pagestyle{fancyplain}
\setlength{\headheight}{42pt}
\renewcommand{\headrulewidth}{0.5pt}
\fancyhf{}

\fancyhead[LE,RO]{
 \includegraphics[width=.2\linewidth]{occiware-logo}
}
\fancyhead[RE,LO]{
 \small
 \begin{tabular}{rlrl}
   \textbf{\owmldoc}         & \@owdelivnr         & \textbf{\owmlstatus}  & \@owstatus \\
   \textbf{\owmlexpected}    & \@owexpected        & \textbf{\owmlnature}  & \@ownature \\
   \textbf{\owmldelivered}   & \@owdelivered       & \textbf{\owmlversion} & \@owversion \\
 \end{tabular}
 \normalsize
}

%
% Redefinitions
%
\renewcommand{\maketitle}{
  \begin{titlepage}%
    \begin{center}
      \begin{minipage}[t]{.6\linewidth}
        \centering

        {\Large
          \includegraphics[width=.8\linewidth]{occiware-logo}
          
          \vskip 3em%
        
          {\sffamily
            {\bfseries
              \iflanguage{french}{ 
                Un cadre formel et outillé pour la gestion de toute ressource
                en nuage
              }{
                A Formal and Tooled Framework for Managing Everything as a
                Service        
              }
              
              \vskip 1em%
              
              {\large \itshape
                www.occiware.org
              }
            }
          }          
        }
      \end{minipage}

      \vskip 4cm%

      {\Huge \sffamily 
        \owmldoc \@owdelivnr

        \vskip 2em%

        {\bfseries
          \@title
        }
      }

      \null\vfill

      {\sffamily
        \iflanguage{french}{
          OCCIware est un projet soutenu par le \emph{Fond national pour
            la Société Numérique} (FSN) et par les pôles de
          compétitivité \emph{Systematic}, \emph{Minalogic},
          \emph{PICOM}, \emph{Images \& Réseaux} et \emph{Solutions
            Communicantes Sécurisées}.
        }{
          OCCIware project is supported by \emph{Fond national pour la
            Société Numérique} (FSN) and the following competitive
          clusters \emph{Systematic}, \emph{Minalogic}, \emph{PICOM},
          \emph{Images \& Réseaux} et \emph{Solutions Communicantes
            Sécurisées}.
        }   
      }
    \end{center}

   \let\footnotesize\small
   \let\footnoterule\relax
   \let \footnote \thanks
   \null\vfil
   \vskip 60\p@
 \end{titlepage}

 \newpage

 \begin{titlepage}
   \sffamily \large

   \begin{tabularx}{\linewidth}{|p{5cm}cX|} \hline
     {\bfseries \iflanguage{french}{Projet num.}{Project nr}} & : & \\
     {\bfseries \iflanguage{french}{Nom du projet}{Project title}} & : & OCCIware \\
     \hline
   \end{tabularx}

   \vskip 2em%

   \begin{tabularx}{\linewidth}{|p{5cm}cX|} \hline
     {\bfseries \owmldoc} & : & \\
     {\bfseries \iflanguage{french}{Titre}{Title}} & : & \@title \\
     {\bfseries \iflanguage{french}{Nature}{Type}} & : & ... \\
     {\bfseries \iflanguage{french}{Niveau de dissémination}{Dissemination level}} & : & ... \\
     {\bfseries \iflanguage{french}{License}{License}} & : & ... \\
     {\bfseries \iflanguage{french}{Version}{Version}} & : & ... \\
     {\bfseries \iflanguage{french}{Date de diffusion}{Diffusion Date}} & : & ... \\
     {\bfseries \iflanguage{french}{Sous-Projet}{Sub-project}} & : & ... \\
     {\bfseries \iflanguage{french}{Éditeur(s)}{Editor(s)}} & : & ... \\
     {\bfseries \iflanguage{french}{Auteur(s)}{Author(s)}} & : & ... \\
     {\bfseries \iflanguage{french}{Réviseur(s)}{Auditor(s)}} & : & ... \\     
     \hline
   \end{tabularx}

   \vskip 2em%

   \begin{tabularx}{\linewidth}{|X|} \hline
     {\bfseries \iflanguage{french}{Résumé}{Abstract}} \\
     ... \\
     \hline
   \end{tabularx}

   \vskip 2em%

   \begin{tabularx}{\linewidth}{|X|} \hline
     {\bfseries \iflanguage{french}{Mots-clés}{Tags}} \\
     ... \\
     \hline
   \end{tabularx}

 \end{titlepage}%

 \setcounter{footnote}{0}%
 \global\let\thanks\relax
 \global\let\maketitle\relax
 \global\let\@thanks\@empty
 \global\let\@author\@empty
 \global\let\@date\@empty
 \global\let\@title\@empty
 \global\let\title\relax
 \global\let\author\relax
 \global\let\date\relax
 \global\let\and\relax
}

%
% Commands
%
 
%
% Abbrevations, common names
%
\newcommand{\project}{OCCIware}
\newcommand{\occiware}{OCCIware}

\newcommand{\occi}{Open Cloud Computing Interface}

\newcommand{\OPW}{Open Wide}
\newcommand{\AON}{ActiveEon SA}
\newcommand{\CSR}{Scalair}
\newcommand{\TSP}{Télécom SudParis}
\newcommand{\INR}{Inria}
\newcommand{\LNG}{Linagora GSO}
\newcommand{\OBO}{Obeo}
\newcommand{\OWC}{OW2 Consortium}
\newcommand{\PNQ}{Pôle Numérique}
\newcommand{\UJF}{Université Joseph Fourier}
